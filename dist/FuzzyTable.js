function t(t){return!Array.isArray?d(t)==="[object Array]":Array.isArray(t)}const e=1/0;function n(t){if(typeof t==="string"){return t}let n=`${t}`;return n==="0"&&1/t===-e?"-0":n}function s(t){return t==null?"":n(t)}function i(t){return typeof t==="string"}function r(t){return typeof t==="number"}function o(t){return t===true||t===false||c(t)&&d(t)==="[object Boolean]"}function a(t){return typeof t==="object"}function c(t){return a(t)&&t!==null}function l(t){return t!==undefined&&t!==null}function h(t){return!t.trim().length}function d(t){return t==null?t===undefined?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const u="Extended search is not available";const f="Incorrect 'index' type";const p=t=>`Invalid value for key ${t}`;const g=t=>`Pattern length exceeds max of ${t}.`;const m=t=>`Missing ${t} property in key`;const x=t=>`Property 'weight' in key '${t}' must be a positive integer`;const b=Object.prototype.hasOwnProperty;class y{constructor(t){this._keys=[];this._keyMap={};let e=0;for(const n of t){let t=w(n);this._keys.push(t);this._keyMap[t.id]=t;e+=t.weight}for(const t of this._keys){t.weight/=e}}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function w(e){let n=null;let s=null;let r=null;let o=1;let a=null;if(i(e)||t(e)){r=e;n=k(e);s=C(e)}else{if(!b.call(e,"name")){throw new Error(m("name"))}const t=e.name;r=t;if(b.call(e,"weight")){o=e.weight;if(o<=0){throw new Error(x(t))}}n=k(t);s=C(t);a=e.getFn}return{path:n,id:s,weight:o,src:r,getFn:a}}function k(e){return t(e)?e:e.split(".")}function C(e){return t(e)?e.join("."):e}function v(e,n){let a=[];let c=false;const h=(e,n,d)=>{if(!l(e)){return}if(!n[d]){a.push(e)}else{let u=n[d];const f=e[u];if(!l(f)){return}if(d===n.length-1&&(i(f)||r(f)||o(f))){a.push(s(f))}else if(t(f)){c=true;for(let t=0,e=f.length;t<e;t+=1){h(f[t],n,d+1)}}else if(n.length){h(f,n,d+1)}}};h(e,i(n)?n.split("."):n,0);return c?a:a[0]}const M={includeMatches:false,findAllMatches:false,minMatchCharLength:1};const N={isCaseSensitive:false,includeScore:false,keys:[],shouldSort:true,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1};const L={location:0,threshold:.6,distance:100};const E={useExtendedSearch:false,getFn:v,ignoreLocation:false,ignoreFieldNorm:false,fieldNormWeight:1};let S={...N,...M,...L,...E};const A=/[^ ]+/g;function $(t=1,e=3){const n=new Map;const s=10**e;return{get(e){const i=e.match(A).length;if(n.has(i)){return n.get(i)}const r=1/i**(.5*t);const o=Number.parseFloat(Math.round(r*s)/s);n.set(i,o);return o},clear(){n.clear()}}}class _{constructor({getFn:t=S.getFn,fieldNormWeight:e=S.fieldNormWeight}={}){this.norm=$(e,3);this.getFn=t;this.isCreated=false;this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t;this._keysMap={};t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){if(this.isCreated||!this.docs.length){return}this.isCreated=true;if(i(this.docs[0])){this.docs.forEach(((t,e)=>{this._addString(t,e)}))}else{this.docs.forEach(((t,e)=>{this._addObject(t,e)}))}this.norm.clear()}add(t){const e=this.size();if(i(t)){this._addString(t,e)}else{this._addObject(t,e)}}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1){this.records[e].i-=1}}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!l(t)||h(t)){return}let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach(((n,r)=>{let o=n.getFn?n.getFn(e):this.getFn(e,n.path);if(!l(o)){return}if(t(o)){let e=[];const n=[{nestedArrIndex:-1,value:o}];while(n.length){const{nestedArrIndex:s,value:r}=n.pop();if(!l(r)){continue}if(i(r)&&!h(r)){let t={v:r,i:s,n:this.norm.get(r)};e.push(t)}else if(t(r)){r.forEach(((t,e)=>{n.push({nestedArrIndex:e,value:t})}))}else;}s.$[r]=e}else if(i(o)&&!h(o)){let t={v:o,n:this.norm.get(o)};s.$[r]=t}}));this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function I(t,e,{getFn:n=S.getFn,fieldNormWeight:s=S.fieldNormWeight}={}){const i=new _({getFn:n,fieldNormWeight:s});i.setKeys(t.map(w));i.setSources(e);i.create();return i}function F(t,{getFn:e=S.getFn,fieldNormWeight:n=S.fieldNormWeight}={}){const{keys:s,records:i}=t;const r=new _({getFn:e,fieldNormWeight:n});r.setKeys(s);r.setIndexRecords(i);return r}function z(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:i=S.distance,ignoreLocation:r=S.ignoreLocation}={}){const o=e/t.length;if(r){return o}const a=Math.abs(s-n);if(!i){return a?1:o}return o+a/i}function B(t=[],e=S.minMatchCharLength){let n=[];let s=-1;let i=-1;let r=0;for(let o=t.length;r<o;r+=1){let o=t[r];if(o&&s===-1){s=r}else if(!o&&s!==-1){i=r-1;if(i-s+1>=e){n.push([s,i])}s=-1}}if(t[r-1]&&r-s>=e){n.push([s,r-1])}return n}const D=32;function T(t,e,n,{location:s=S.location,distance:i=S.distance,threshold:r=S.threshold,findAllMatches:o=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,includeMatches:c=S.includeMatches,ignoreLocation:l=S.ignoreLocation}={}){if(e.length>D){throw new Error(g(D))}const h=e.length;const d=t.length;const u=Math.max(0,Math.min(s,d));let f=r;let p=u;const m=a>1||c;const x=m?Array(d):[];let b;while((b=t.indexOf(e,p))>-1){let t=z(e,{currentLocation:b,expectedLocation:u,distance:i,ignoreLocation:l});f=Math.min(t,f);p=b+h;if(m){let t=0;while(t<h){x[b+t]=1;t+=1}}}p=-1;let y=[];let w=1;let k=h+d;const C=1<<h-1;for(let s=0;s<h;s+=1){let r=0;let a=k;while(r<a){const t=z(e,{errors:s,currentLocation:u+a,expectedLocation:u,distance:i,ignoreLocation:l});if(t<=f){r=a}else{k=a}a=Math.floor((k-r)/2+r)}k=a;let c=Math.max(1,u-a+1);let g=o?d:Math.min(u+a,d)+h;let b=Array(g+2);b[g+1]=(1<<s)-1;for(let r=g;r>=c;r-=1){let o=r-1;let a=n[t.charAt(o)];if(m){x[o]=+!!a}b[r]=(b[r+1]<<1|1)&a;if(s){b[r]|=(y[r+1]|y[r])<<1|1|y[r+1]}if(b[r]&C){w=z(e,{errors:s,currentLocation:o,expectedLocation:u,distance:i,ignoreLocation:l});if(w<=f){f=w;p=o;if(p<=u){break}c=Math.max(1,2*u-p)}}}const v=z(e,{errors:s+1,currentLocation:u,expectedLocation:u,distance:i,ignoreLocation:l});if(v>f){break}y=b}const v={isMatch:p>=0,score:Math.max(.001,w)};if(m){const t=B(x,a);if(!t.length){v.isMatch=false}else if(c){v.indices=t}}return v}function P(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<s-n-1}return e}class j{constructor(t,{location:e=S.location,threshold:n=S.threshold,distance:s=S.distance,includeMatches:i=S.includeMatches,findAllMatches:r=S.findAllMatches,minMatchCharLength:o=S.minMatchCharLength,isCaseSensitive:a=S.isCaseSensitive,ignoreLocation:c=S.ignoreLocation}={}){this.options={location:e,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c};this.pattern=a?t:t.toLowerCase();this.chunks=[];if(!this.pattern.length){return}const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:P(t),startIndex:e})};const h=this.pattern.length;if(h>D){let t=0;const e=h%D;const n=h-e;while(t<n){l(this.pattern.substr(t,D),t);t+=D}if(e){const t=h-D;l(this.pattern.substr(t),t)}}else{l(this.pattern,0)}}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(!e){t=t.toLowerCase()}if(this.pattern===t){let e={isMatch:true,score:0};if(n){e.indices=[[0,t.length-1]]}return e}const{location:s,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:a,ignoreLocation:c}=this.options;let l=[];let h=0;let d=false;this.chunks.forEach((({pattern:e,alphabet:u,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=T(t,e,u,{location:s+f,distance:i,threshold:r,findAllMatches:o,minMatchCharLength:a,includeMatches:n,ignoreLocation:c});if(p){d=true}h+=g;if(p&&m){l=[...l,...m]}}));let u={isMatch:d,score:d?h/this.chunks.length:1};if(d&&n){u.indices=l}return u}}class O{constructor(t){this.pattern=t}static isMultiMatch(t){return W(t,this.multiRegex)}static isSingleMatch(t){return W(t,this.singleRegex)}search(){}}function W(t,e){const n=t.match(e);return n?n[1]:null}class R extends O{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class H extends O{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=t.indexOf(this.pattern);const n=e===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class U extends O{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class J extends O{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class V extends O{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class q extends O{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class K extends O{constructor(t,{location:e=S.location,threshold:n=S.threshold,distance:s=S.distance,includeMatches:i=S.includeMatches,findAllMatches:r=S.findAllMatches,minMatchCharLength:o=S.minMatchCharLength,isCaseSensitive:a=S.isCaseSensitive,ignoreLocation:c=S.ignoreLocation}={}){super(t);this._bitapSearch=new j(t,{location:e,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Z extends O{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0;let n;const s=[];const i=this.pattern.length;while((n=t.indexOf(this.pattern,e))>-1){e=n+i;s.push([n,e-1])}const r=!!s.length;return{isMatch:r,score:r?0:1,indices:s}}}const G=[R,Z,U,J,q,V,H,K];const Q=G.length;const X=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const Y="|";function tt(t,e={}){return t.split(Y).map((t=>{let n=t.trim().split(X).filter((t=>t&&!!t.trim()));let s=[];for(let t=0,i=n.length;t<i;t+=1){const i=n[t];let r=false;let o=-1;while(!r&&++o<Q){const t=G[o];let n=t.isMultiMatch(i);if(n){s.push(new t(n,e));r=true}}if(r){continue}o=-1;while(++o<Q){const t=G[o];let n=t.isSingleMatch(i);if(n){s.push(new t(n,e));break}}}return s}))}const et=new Set([K.type,Z.type]);class nt{constructor(t,{isCaseSensitive:e=S.isCaseSensitive,includeMatches:n=S.includeMatches,minMatchCharLength:s=S.minMatchCharLength,ignoreLocation:i=S.ignoreLocation,findAllMatches:r=S.findAllMatches,location:o=S.location,threshold:a=S.threshold,distance:c=S.distance}={}){this.query=null;this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:s,findAllMatches:r,ignoreLocation:i,location:o,threshold:a,distance:c};this.pattern=e?t:t.toLowerCase();this.query=tt(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e){return{isMatch:false,score:1}}const{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let i=0;let r=[];let o=0;for(let s=0,a=e.length;s<a;s+=1){const a=e[s];r.length=0;i=0;for(let e=0,s=a.length;e<s;e+=1){const s=a[e];const{isMatch:c,indices:l,score:h}=s.search(t);if(c){i+=1;o+=h;if(n){const t=s.constructor.type;if(et.has(t)){r=[...r,...l]}else{r.push(l)}}}else{o=0;i=0;r.length=0;break}}if(i){let t={isMatch:true,score:o/i};if(n){t.indices=r}return t}}return{isMatch:false,score:1}}}const st=[];function it(...t){st.push(...t)}function rt(t,e){for(let n=0,s=st.length;n<s;n+=1){let s=st[n];if(s.condition(t,e)){return new s(t,e)}}return new j(t,e)}const ot={AND:"$and",OR:"$or"};const at={PATH:"$path",PATTERN:"$val"};const ct=t=>!!(t[ot.AND]||t[ot.OR]);const lt=t=>!!t[at.PATH];const ht=e=>!t(e)&&a(e)&&!ct(e);const dt=t=>({[ot.AND]:Object.keys(t).map((e=>({[e]:t[e]})))});function ut(e,n,{auto:s=true}={}){const r=e=>{let o=Object.keys(e);const a=lt(e);if(!a&&o.length>1&&!ct(e)){return r(dt(e))}if(ht(e)){const t=a?e[at.PATH]:o[0];const r=a?e[at.PATTERN]:e[t];if(!i(r)){throw new Error(p(t))}const c={keyId:C(t),pattern:r};if(s){c.searcher=rt(r,n)}return c}let c={children:[],operator:o[0]};o.forEach((n=>{const s=e[n];if(t(s)){s.forEach((t=>{c.children.push(r(t))}))}}));return c};if(!ct(e)){e=dt(e)}return r(e)}function ft(t,{ignoreFieldNorm:e=S.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:s,score:i})=>{const r=t?t.weight:null;n*=Math.pow(i===0&&r?Number.EPSILON:i,(r||1)*(e?1:s))}));t.score=n}))}function pt(t,e){const n=t.matches;e.matches=[];if(!l(n)){return}n.forEach((t=>{if(!l(t.indices)||!t.indices.length){return}const{indices:n,value:s}=t;let i={indices:n,value:s};if(t.key){i.key=t.key.src}if(t.idx>-1){i.refIndex=t.idx}e.matches.push(i)}))}function gt(t,e){e.score=t.score}function mt(t,e,{includeMatches:n=S.includeMatches,includeScore:s=S.includeScore}={}){const i=[];if(n)i.push(pt);if(s)i.push(gt);return t.map((t=>{const{idx:n}=t;const s={item:e[n],refIndex:n};if(i.length){i.forEach((e=>{e(t,s)}))}return s}))}class xt{constructor(t,e={},n){this.options={...S,...e};if(this.options.useExtendedSearch&&!true){throw new Error(u)}this._keyStore=new y(this.options.keys);this.setCollection(t,n)}setCollection(t,e){this._docs=t;if(e&&!(e instanceof _)){throw new Error(f)}this._myIndex=e||I(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){if(!l(t)){return}this._docs.push(t);this._myIndex.add(t)}remove(t=(()=>false)){const e=[];for(let n=0,s=this._docs.length;n<s;n+=1){const i=this._docs[n];if(t(i,n)){this.removeAt(n);n-=1;s-=1;e.push(i)}}return e}removeAt(t){this._docs.splice(t,1);this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:o,sortFn:a,ignoreFieldNorm:c}=this.options;let l=i(t)?i(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);ft(l,{ignoreFieldNorm:c});if(o){l.sort(a)}if(r(e)&&e>-1){l=l.slice(0,e)}return mt(l,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){const e=rt(t,this.options);const{records:n}=this._myIndex;const s=[];n.forEach((({v:t,i:n,n:i})=>{if(!l(t)){return}const{isMatch:r,score:o,indices:a}=e.searchIn(t);if(r){s.push({item:t,idx:n,matches:[{score:o,value:t,norm:i,indices:a}]})}}));return s}_searchLogical(t){const e=ut(t,this.options);const n=(t,e,s)=>{if(!t.children){const{keyId:n,searcher:i}=t;const r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:i});if(r&&r.length){return[{idx:s,item:e,matches:r}]}return[]}const i=[];for(let r=0,o=t.children.length;r<o;r+=1){const o=t.children[r];const a=n(o,e,s);if(a.length){i.push(...a)}else if(t.operator===ot.AND){return[]}}return i};const s=this._myIndex.records;const i={};const r=[];s.forEach((({$:t,i:s})=>{if(l(t)){let o=n(e,t,s);if(o.length){if(!i[s]){i[s]={idx:s,item:t,matches:[]};r.push(i[s])}o.forEach((({matches:t})=>{i[s].matches.push(...t)}))}}}));return r}_searchObjectList(t){const e=rt(t,this.options);const{keys:n,records:s}=this._myIndex;const i=[];s.forEach((({$:t,i:s})=>{if(!l(t)){return}let r=[];n.forEach(((n,s)=>{r.push(...this._findMatches({key:n,value:t[s],searcher:e}))}));if(r.length){i.push({idx:s,item:t,matches:r})}}));return i}_findMatches({key:e,value:n,searcher:s}){if(!l(n)){return[]}let i=[];if(t(n)){n.forEach((({v:t,i:n,n:r})=>{if(!l(t)){return}const{isMatch:o,score:a,indices:c}=s.searchIn(t);if(o){i.push({score:a,key:e,value:t,idx:n,norm:r,indices:c})}}))}else{const{v:t,n:r}=n;const{isMatch:o,score:a,indices:c}=s.searchIn(t);if(o){i.push({score:a,key:e,value:t,norm:r,indices:c})}}return i}}xt.version="7.0.0";xt.createIndex=I;xt.parseIndex=F;xt.config=S;{xt.parseQuery=ut}{it(nt)}function bt(t,e){const n=e.id;const s=t.sortedCol===n;t.sortedCol=s?"":n;if(e.type==="int"||e.type==="year"||e.type==="bool"){return t.table.sort(((t,e)=>{const i=t[n]!==undefined&&t[n]!==null?Number(t[n]):-Infinity;const r=e[n]!==undefined&&e[n]!==null?Number(e[n]):-Infinity;return s?r-i:i-r}))}return t.table.sort(((t,e)=>{const i=t[n]??"";const r=e[n]??"";return s?r.localeCompare(i):i.localeCompare(r)}))}const yt=(t,e)=>{const n=(t,e)=>[(t+1)*e-e,(t+1)*e];const[s,i]=n(t.currentPage,t.size);const r=t.table.slice(s,i);e.innerHTML="";let o=s+1;for(const n of r){const s=document.createElement("tr");s.className=t.classes.tr;if(t.numberCol){const e=document.createElement("td");e.className=`${t.classes.tableColumn??""} number-column`;e.textContent=o++;s.appendChild(e)}for(const e of t.head){const i=document.createElement("td");i.className=`${e.class??""} ${e.id} ${t.classes.tableColumn??""}`;if(e.type){i.setAttribute("data-type",e.type)}const r=n[e.id]??"";const o=Ct(t,r,e.type,t.locale);const a=new DocumentFragment;if(e.icon){a.appendChild(wt(e.icon,n[e.icon.id]??""))}if(e.img){a.appendChild(kt(e.img,n[e.img.id]??""))}a.appendChild(document.createTextNode(o));if(e.subtitle){const s=document.createElement("em");s.className=t.classes.tableCellSubtitle;s.innerText=n[e.subtitle]??"";a.appendChild(s)}if(e.link){const s=document.createElement("a");s.className=t.classes.tableCellLink;s.href=`${e.link.base?e.link.base:""}${n[e.link.id]}`;s.target=e.link.target??"_self";s.appendChild(a);i.appendChild(s)}else{i.appendChild(a)}if(e.suffix&&r!==""){i.appendChild(t.safeHtml(e.suffix))}if(e.hideZeros&&r===0){i.classList.add("hidden")}s.appendChild(i)}e.appendChild(s)}};const wt=(t,e)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg");const s=document.createElementNS("http://www.w3.org/2000/svg","use");s.setAttribute("href",`${t.base}${e}`);s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${e}`);if(t.class){n.setAttribute("class",t.class)}n.appendChild(s);return n};const kt=(t,e)=>{const n=document.createElement("img");n.setAttribute("src",`${t.base}${e}${t.ext??""}`);if(t.class){n.setAttribute("class",t.class)}return n};const Ct=(t,e,n,s)=>{if(e==""||typeof e==undefined){return""}if(n==="int"){return new Intl.NumberFormat(s).format(e)}if(n==="date"||n==="year"){if(n==="date"){const t=new Date(e);return new Intl.DateTimeFormat(s).format(t)}else if(n==="year"){const t=new Date(e,0,1);return new Intl.DateTimeFormat(s,{year:"numeric"}).format(t)}}if(n==="bool"){return e?t.checkMark:t.xMark}return e};const vt={pagination:"",sortArrow:"",arrowUp:"absolute right-2 top-1.5 text-sm",arrowDown:"absolute right-2 bottom-1.5 text-sm",paginationButton:"w-auto h-10 px-4 inline-flex justify-center items-center border dark:border-stone-900",paginationButtonCurrent:"text-lg font-bold text-[#F8BB39]",paginationNav:"relative z-0 flex mt-4 justify-center rounded-md -space-x-px dark:text-[#f8f8f0]",paginationDescription:"text-center my-2 dark:text-[#f8f8f0] text-xs",paginationDescriptionStart:"text-[#F8BB39] text-xs",paginationDescriptionEnd:"text-[#F8BB39] text-xs",paginationDescriptionTotal:"text-[#F8BB39] text-xs",paginationNav:"",paginationTopArrow:"relative inline-flex items-center bg-white dark:bg-stone-700 px-2 h-12 dark:text-[#f8f8f0] focus:z-10",topPaginationNav:"relative flex items-center h-12 text-sm border-r-2 border-stone-200 dark:border-stone-950 dark:bg-stone-700 text-stone-800 dark:text-stone-300 placeholder-stone-800 dark:placeholder-stone-100",topPaginationCurrent:"block w-auto text-sm font-bold text-center whitespace-no-wrap px-2",downloadWrapper:"relative border-r-2 border-stone-200 dark:border-stone-950",downloadButton:"relative inline-flex items-center bg-white dark:bg-stone-700 px-2 h-12 dark:text-[#f8f8f0] focus:z-10",downloadDropdown:"absolute left-0 z-50 -mr-1 mt-2 w-56 origin-top-right rounded-md bg-white dark:bg-stone-800 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",downloadDropdownButton:"text-stone-700 dark:text-[#f8f8f0] hover:dark:bg-stone-900 hover:bg-stone-200 w-full block px-4 py-2 text-sm text-left",downloadDropdownInfo:"text-center text-xs text-stone-700 dark:text-[#f8f8f0] py-2",fieldsetWrap:"block mt-8 w-full bg-gray-200 dark:bg-stone-700 text-sm font-semibold p-3 text-stone-900 dark:text-[#f8f8f0] border-b border-stone-200 dark:border-stone-500 rounded-t-lg",fieldsetFilterWrap:"mb-4 dark:bg-stone-900 border border-stone-200 dark:border-stone-950 p-2",fieldset:"mb-4 dark:bg-stone-900 border border-stone-200 dark:border-stone-950 p-2",filterContainer:"hidden sm:flex flex-col lg:w-1/5 ltr:mr-4 rtl:ml-4",filterButton:"text-sm relative px-2 py-1 my-2 w-full flex flex-row justify-center cursor-pointer rounded-lg border dark:text-[#f8f8f0] dark:bg-stone-800 border-stone-200 dark:border-stone-500 shadow-sm",filterButtonActive:"bg-stone-400 dark:bg-stone-950 text-white border-stone-800",tableContainer:"flex flex-col w-full relative z-10 max-w-7xl mx-auto",tableColumn:"whitespace-nowrap px-3 py-2 text-sm text-stone-800 dark:text-[#f8f8f0] border border-stone-200 dark:border-stone-800 relative truncate max-w-[240px]",searchInput:"relative indent-6 block w-full h-12 px-4 text-sm dark:bg-stone-700 text-stone-800 dark:text-stone-300 placeholder-stone-800 dark:placeholder-stone-100 ltr:rounded-tl-xl rtl:rounded-tr-xl",searchIcon:"absolute block w-6 h-6 z-30 mt-3 mx-2 text-white",searchWrapper:"w-full h-12 flex-shrink border-r-2 border-stone-200 dark:border-stone-950",sizeSelectContainer:"h-12 w-36 relative",sizeSelect:"appearance-none w-full h-full bg-white dark:bg-stone-700 dark:text-[#f8f8f0] text-center rtl:rounded-tl-lg ltr:rounded-tr-lg",tableHeader:"flex flex-row mt-8 mb-0.5 h-12",tableCellLink:"text-[#F8BB39]",table:"w-full",thead:"bg-stone-100 dark:bg-stone-700",tbody:"divide-y divide-stone-200 dark:divide-stone-800 bg-white dark:bg-stone-800 border border-stone-500 dark:border-none",th:"relative px-1 py-3 rtl:pr-7 ltr:text-left rtl:text-right text-sm font-semibold text-stone-900 dark:text-[#f8f8f0] cursor-pointer",tr:"dark:even:bg-stone-900",td:"whitespace-nowrap px-3 py-2 text-sm text-stone-800 dark:text-[#f8f8f0] border border-stone-200 dark:border-stone-800 relative truncate max-w-[240px]"};const Mt=(t={})=>{const e={...vt};for(const n of Object.keys(t)){if(n.startsWith("_")){e[n.substring(1)]=t[n]}else{e[n]=t[n]}}return e};function Nt(t,e={}){const n=document.createElement(t);for(const[t,s]of Object.entries(e)){if(t==="style"&&typeof s==="object"){Object.assign(n.style,s)}else{n[t]=s}}return n}function Lt(t){if(t.aside){const e=Nt("aside",{innerHTML:t.aside});t.container.appendChild(e)}if(t.filters.length>0){const e=Nt("div",{className:t.classes.filterContainer,id:"fuzzy_filters"});t.filters.forEach(((n,s)=>{const i=Nt("div",{className:t.classes.fieldsetWrap,textContent:n.name});e.appendChild(i);const r=St(n,s,At,t);e.appendChild(r)}));t.container.appendChild(e)}}function Et(t,e,n,s){const i=document.createDocumentFragment();if(t.icon){i.appendChild(wt(t.icon,n.code??""))}i.appendChild(document.createTextNode(n.title??""));const r=Nt("button",{className:`${e.filterButton} ${n.active?e.filterButtonActive:""}`,onclick:s});r.appendChild(i);return r}function St(t,e,n,s){const i=Nt("fieldset",{className:s.classes.fieldset});t.options.forEach(((r,o)=>{const a=Et(t,s.classes,r,(()=>n(s,e,o)));i.appendChild(a)}));return i}function At(t,e,n){let s=t.data;t.filters[e].options[n].active=t.filters[e].options[n].values!=="";if(t.filters[e].filterType==="radio"){t.filters[e].options.forEach(((s,i)=>{if(i!==n){t.filters[e].options[i].active=false}}))}t.filters[e].options[n].active=true;for(const e of t.filters){for(const t of e.options.filter((t=>t.active))){console.log(t);s=s.filter((n=>{const s=t.value.test(n[e.filterColumn]);t.active=true;return t.inverse?!s:s}))}}t.currentPage=0;t.table=s;t.updateTable();t.fuse=new xt(t.table,{shouldSort:true,includeMatches:true,threshold:.3,location:0,distance:50,maxPatternLength:12,minMatchCharLength:1,keys:t.head.filter((t=>t.searchable!==false)).map((t=>t.id))});t.paginationUpdate(t);const i=document.getElementById("fuzzy_filters");t.filters.forEach(((e,n)=>{const s=Array.from(i.querySelectorAll("fieldset"));t.filters.forEach(((e,n)=>{const i=s[n];if(!i)return;e.options.forEach(((e,n)=>{const s=i.children[n];if(!s)return;const r=t.classes.filterButtonActive.split(" ");for(const t of r){if(e.active){s.classList.add(t)}else{s.classList.remove(t)}}}))}))}))}function $t(t,e){if(!t.paginationNav){t.paginationNav=Nt("nav",{id:"paginationNav",className:t.classes.paginationNav||""});const n=Nt("div",{id:"paginationContainer",className:t.classes.tablePagination||""});n.appendChild(t.paginationNav);t.paginationDescription=Nt("div",{id:"paginationDescription",className:t.classes.paginationDescription||""});n.appendChild(t.paginationDescription);e.appendChild(n)}Ft(t)}function _t(t){if(!t.topPaginationNav){t.topPaginationNav=Nt("nav",{id:"topPaginationNav",className:t.classes.topPaginationNav||""})}It(t);return t.topPaginationNav}function It(t){const e=t.topPaginationNav;const n=Math.ceil(t.table.length/t.size);e.innerHTML="";const s=document.createDocumentFragment();if(t.currentPage>0&&!t.paginationArrowButtonsDisabled){s.appendChild(zt(t,"back","top"))}const i=Nt("span",{textContent:`${t.numberFormatter.format(t.currentPage+1)}/${t.numberFormatter.format(n)}`,className:t.classes.topPaginationCurrent||""});s.appendChild(i);if(t.currentPage<n-1&&!t.paginationArrowButtonsDisabled){s.appendChild(zt(t,"forward","top"))}e.appendChild(s)}const Ft=t=>{const e=t.paginationNav;const n=Math.ceil(t.table.length/t.size);t.displayPages=Dt(t.currentPage,n,4);e.innerHTML="";const s=document.createDocumentFragment();if(t.currentPage>0&&!t.paginationArrowButtonsDisabled){s.appendChild(zt(t,"back"))}for(const e of t.displayPages){s.appendChild(Bt(t,e))}if(t.currentPage<n-1&&!t.paginationArrowButtonsDisabled){s.appendChild(zt(t,"forward"))}const{paginationDescriptionStart:i,paginationDescriptionEnd:r,paginationDescriptionTotal:o}=t.classes;t.paginationDescription.innerHTML=`\n        ${t.t?.showing??""} \n        <span class="${i}">${t.numberFormatter.format(t.currentPage*t.size+1)}</span>\n        ${t.t?.to??"-"}\n        <span class="${r}">${t.numberFormatter.format(Math.min((t.currentPage+1)*t.size,t.table.length))}</span>\n        ${t.t?.of??"/"}\n        <span class="${o}">${t.numberFormatter.format(t.table.length)}</span>\n        ${t.t?.entries??""}\n    `;It(t);e.appendChild(s)};function zt(t,e,n="bottom"){const s=n=="top"?t.classes.paginationTopArrow:[t.classes.paginationButton,t.classes.paginationArrow||""].join(" ");return Nt("button",{textContent:e==="back"?"<":">",className:s,onclick:()=>{t.currentPage+=e==="back"?-1:1;t.updateTable();Ft(t)}})}function Bt(t,e){if(e==="..."){return Nt("span",{textContent:"...",className:t.classes.paginationButton})}return Nt("button",{textContent:t.numberFormatter.format(e+1),className:[t.classes.paginationButton,t.currentPage===e?t.classes.paginationButtonCurrent:""].join(" "),onclick:()=>{t.currentPage=e;t.updateTable();Ft(t)}})}function Dt(t,e,n){const s=[];const i=Math.max(t-n,0);const r=Math.min(t+n,e-1);if(i>1){s.push(0,"...")}else if(i===1){s.push(0)}for(let t=i;t<=r;t++){s.push(t)}if(r<e-2){s.push("...",e-1)}else if(r===e-2){s.push(e-1)}return s}function Tt(t){const e=Nt("label",{className:t.classes.searchWrapper});const n=Nt("input",{type:"search",id:"fuzzy_search",placeholder:t.t?.search_placeholder??"Search",className:t.classes.searchInput});n.oninput=()=>{if(t.searchBox.value!==""){t.table=t.fuse.search(t.searchBox.value).slice(0,100).map((t=>t.item))}else{let e=t.data;for(const n of t.filters){for(const t of n.options.filter((t=>t.active))){e=e.filter((e=>{const s=t.value.test(e[n.filterColumn]);t.active=true;return t.inverse?!s:s}))}}t.table=e}t.currentPage=0;t.updateTable();$t(t)};t.searchBox=n;const s=Nt("span",{className:t.classes.searchIcon,innerHTML:`\n            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="icon">\n                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />\n            </svg>`});e.append(s,n);t.searchBox=n;return e}function Pt(t){const e=Nt("details",{id:"fuzzy_download_details",className:t.classes.downloadWrapper});const n=Nt("summary",{className:t.classes.downloadButton});const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("fill","none");s.setAttribute("viewBox","0 0 24 24");s.setAttribute("stroke-width","1.5");s.setAttribute("stroke","currentColor");s.setAttribute("class","w-6 h-6");s.innerHTML='<path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />';n.appendChild(s);const i=Nt("div",{className:t.classes.downloadDropdown,innerHTML:`<p class="${t.classes.downloadDropdownInfo}">(Download current filtered dataset)</p>`});for(const e of["CSV","Excel","TSV","JSON"]){const n=Nt("button",{className:t.classes.downloadDropdownButton,textContent:e,onclick:()=>jt(t.table,e)});i.appendChild(n)}e.appendChild(n);e.appendChild(i);document.addEventListener("click",(t=>{if(!e.contains(t.target)&&e.hasAttribute("open")){e.removeAttribute("open")}}));return e}function jt(t,e){const n=(t,e)=>{const n=Object.keys(t[0]).join(e);const s=t.map((t=>Object.values(t).join(e))).join("\n");return`${n}\n${s}`};const s=t=>{let e='<table border="1"><thead><tr>';Object.keys(t[0]).forEach((t=>{e+=`<th>${t}</th>`}));e+="</tr></thead><tbody>";t.forEach((t=>{e+="<tr>";Object.values(t).forEach((t=>{e+=`<td>${t}</td>`}));e+="</tr>"}));e+="</tbody></table>";return e};let i;let r;let o;switch(e){case"TSV":i="text/tab-separated-values";r="data.tsv";o=n(t,"\t");break;case"CSV":i="text/csv";r="data.csv";o=n(t,",");break;case"Excel":i="application/vnd.ms-excel";r="data.xls";const e=s(t);o=`\n<html xmlns:o="urn:schemas-microsoft-com:office:office"\n      xmlns:x="urn:schemas-microsoft-com:office:excel"\n      xmlns="http://www.w3.org/TR/REC-html40">\n<head>\n    <meta charset="UTF-8">\n    \x3c!--[if gte mso 9]>\n    <xml>\n        <x:ExcelWorkbook>\n            <x:ExcelWorksheets>\n                <x:ExcelWorksheet>\n                    <x:Name>Sheet1</x:Name>\n                    <x:WorksheetOptions>\n                        <x:DisplayGridlines/>\n                    </x:WorksheetOptions>\n                </x:ExcelWorksheet>\n            </x:ExcelWorksheets>\n        </x:ExcelWorkbook>\n    </xml>\n    <![endif]--\x3e\n</head>\n<body>\n    ${e}\n</body>\n</html>`;break;default:i="application/json";r="data.json";o=JSON.stringify(t,null,2);break}const a=new Blob([o],{type:i});const c=document.createElement("a");c.download=r;c.href=URL.createObjectURL(a);document.body.appendChild(c);c.click();document.body.removeChild(c)}function Ot(t){const e=Nt("div",{className:t.classes.sizeSelectContainer??""});const n=Nt("label",{htmlFor:"fuzzy_size_select",className:"sr-only",textContent:"Select Page Size"});e.appendChild(n);const s=Nt("select",{id:"fuzzy_size_select",className:t.classes.sizeSelect||""});e.appendChild(s);const i=new Intl.NumberFormat(t.locale);for(const e of t.pageSizes){const n=Nt("option",{value:e,textContent:i.format(e)});if(e===t.size){n.selected=true}s.appendChild(n)}s.value=t.size;s.addEventListener("change",(e=>{t.size=e.target.value;t.currentPage=0;t.paginationUpdate();t.updateTable()}));return e}class Wt{constructor(t,e,n,s){this.container=document.getElementById(t);if(e){this.data=[...e];this.table=[...e]}else{this.data=[...JSON.parse(this.container.dataset.rows)];this.table=[...JSON.parse(this.container.dataset.rows)]}this.searchBox;this.query="";this.sortedCol="";this.filters=s.filters??[];this.head=n;if(n){this.head=n}else{this.head=[...JSON.parse(this.container.dataset.head)]}this.filteredTable=[];this.size=s.pageSize??this.container?.dataset?.pageSize??100;this.currentPage=0;this.numberCol=s.numberCol??false;this.pageSizes=s.pageSizes??this.container?.dataset?.pageSizes??[50,100,250,1e3,5e3];this.paginationArrowButtonsDisabled=s?.paginationArrowButtonsDisabled;this.classes=Mt(s.classes);this.aside=s.aside??this.container?.dataset?.aside;this.checkMark=s?.checkMark??this.container?.dataset?.checkMark??"✓";this.xMark=s?.xMark??this.container?.dataset?.xMark??"✗";this.locale=s.locale??"en";this.numberFormatter=new Intl.NumberFormat(this.locale);this.t=s.t??{search_placeholder:"Search"};this.vernacularNumerals=s.vernacularNumerals??true;this.fuse=new xt(this.table,{shouldSort:true,includeMatches:true,threshold:.15,location:0,distance:120,maxPatternLength:12,minMatchCharLength:1,useExtendedSearch:true,keys:this.head.filter((t=>t.searchable!==false)).map((t=>t.id))});this.render()}setData(t){this.update((()=>{this.data=t;this.table=t;this.filteredTable=t.filter((()=>true))}))}render=()=>{this.container.innerHTML="";Lt(this);const t=document.createElement("div");t.className=this.classes.tableContainer;const e=document.createElement("div");e.className=this.classes.tableHeader;e.appendChild(Tt(this));e.appendChild(_t(this));e.appendChild(Pt(this));e.appendChild(Ot(this));const n=document.createElement("table");n.className=this.classes.table;const s=document.createElement("thead");if(this.classes.thead){s.className=this.classes.thead}if(this.numberCol){const t=document.createElement("th");t.className=`${this.classes.th??""} number-column`;t.textContent="#";s.appendChild(t)}for(const t of this.head){const e=document.createElement("th");e.className=`${this.classes.th??""} ${t.class??""}`;e.textContent=t.name;const n=document.createElement("span");const i=document.createElement("span");n.className=this.classes.arrowUp;i.className=this.classes.arrowDown;n.textContent="▲";i.textContent="▼";n.style.opacity=.35;i.style.opacity=.35;e.appendChild(n);e.appendChild(i);e.addEventListener("click",(()=>{for(const t of document.querySelectorAll("th span")){t.style.opacity=.35}const s=e.classList.toggle("ascending");if(s){n.style.opacity=1;i.style.opacity=.35}else{i.style.opacity=1;n.style.opacity=.35}this.table=bt(this,t);this.updateTable()}));s.appendChild(e)}n.appendChild(s);const i=document.createElement("tbody");i.id="fuzzy-rows";if(this.classes.tbody){i.className=this.classes.tbody}yt(this,i);n.appendChild(i);t.appendChild(e);t.appendChild(n);$t(this,t);this.container.append(t);this.filters.forEach(((t,e)=>{t.options.forEach(((t,n)=>{if(t.active){At(this,e,n)}}))}))};safeHtml=t=>{const e=document.createElement("div");e.innerHTML=t;for(const t of["script","iframe","link","style","object","embed"]){const n=e.getElementsByTagName(t);for(let t=n.length-1;t>=0;t--){n[t].parentNode.removeChild(n[t])}}return e.firstChild};paginationUpdate=()=>Ft(this);updateTable=()=>yt(this,document.getElementById("fuzzy-rows"))}export{Wt as default};
//# sourceMappingURL=FuzzyTable.js.map
